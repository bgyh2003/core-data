class t{constructor(t){this.data=t}get(t){return this.data[t]}set(t,e){this.data[t]=e}update(t){return Object.assign(this.data,t),Object.keys(t)}export(){return JSON.parse(JSON.stringify(this.data))}}class e{constructor(){this.listeners=[]}addListener(t,e=[],s=[]){this.listeners.push({callback:t,keys:e,channels:s})}removeListener(t){this.listeners=this.listeners.filter(e=>e.callback!==t)}clearListeners(){this.listeners=[]}trigger(t,e,s=[]){this.listeners.forEach(({keys:a,callback:r,channels:i})=>{(0===s.length||0===i.length||s.some(t=>i.includes(t)))&&(0===a.length||e.some(t=>a.includes(t)))&&r(t,e,s)})}}class s{constructor(s){this.dataStorage=new t(s),this.dataEvent=new e}get(t){return this.dataStorage.get(t)}set(t,e,s=[]){this.dataStorage.set(t,e),this.dataEvent.trigger(this.dataStorage.data,[t],s)}export(){return this.dataStorage.export()}update(t,e=[]){const s=this.dataStorage.update(t);this.dataEvent.trigger(this.dataStorage.data,s,e)}addListener(t,e=[],s=[]){this.dataEvent.addListener(t,e,s)}removeListener(t){this.dataEvent.removeListener(t)}clearListeners(){this.dataEvent.clearListeners()}}export{s as CoreData,e as DataEvent,t as DataStorage};
//# sourceMappingURL=index.esm.js.map
